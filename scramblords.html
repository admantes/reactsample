<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Scramblords</title>
 
  <script src="https://unpkg.com/react@15/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@15/dist/react-dom.js"></script>
  <script src="https://unpkg.com/babel-standalone/babel.min.js"></script>
	<script src="./js/typo.js" > </script>
	
  <style>
	.xsquare{
		background-color:teal;
		font-size:40px;
		font-weight:bold;
		width:50px;
		height:50px;
		text-align:center;
		margin-top:2px;
		border-radius: 8px;
		border: 4px solid #693D25;
		line-height:50px;
		float: left;
		margin-left:2px;
		user-select: none;  
		cursor: default;
	}
	
	.square:focus {
		outline: none;
	}
	
	.xdispText{
		background-color:#6EA498;
		font-weight:bold;
		font-size:28px;
		border-radius: 2px;
		border: 2px solid #00372B;
		width:250px;
		line-height:50px;
		height:50px;
		text-align:center;
	}
	/*body {
	  color: #6699CC;
	  font-size: 22px;
	  font-family: "Helvetica Neue";
	  background: linear-gradient(slategray, aquamarine);
	  text-align: center;
	  display: flex;
	  align-items: center;
	  justify-content: center;
	}*/
	
	
	.board-row:after {
	  clear: both;
	  content: "";
	  display: table;
	}
  </style>
  
  <script type="text/babel">
	 
	 function Square(props){
      return (
        <div className="square" onClick={props.onClick}>         
				{props.curVal}			 
        </div>
      );
    }
 
	function TextDisplay(props){
		return(
			<div className="dispText">
			{props.value}
			</div>
		);
		
	}
	
	function CheckButton(props){
		return(
		<button className="checkButton" onClick={props.onClick}>
			Check
		</button>
		);
	}
	
	class Timer extends React.Component{
		constructor(props){
			super(props);
			this.state = {
				curTime: 5
				 
			}
		}
		 
		componentDidMount(){
			this.startTimer();
		}
		startTimer(){
			this.timer = setInterval(this.tickee, 1000);
		}
		
		tickee = () => {			
		
			const newTime = this.state.curTime - 1;
			
			if(newTime < 1 ){
				console.log("Timer has stopped!");
				this.setState({
					curTime: 0				
				});
			}else{
				
				this.setState({
					curTime: newTime				
				});
			}
		
		}
		
		render(){
			return(
			<div className="timer"> 
				<div className="timerLabel"> Time </div>
				<div className="timerTime">  {this.state.curTime} </div>
			</div>
			);
		}
	}
	
	
	
	class Game extends React.Component{
		constructor(props) {
			super(props);
			this.handleClick = this.handleClick.bind(this);
			this.state = {
				curChar: "X",
				charList: this.generateNewChars(),
				curWord: " "
				}
        }
	
		generateNewChars(){
			const letters = ["A","B","C","D","E","F","G","H"];
			const charlist = Array(16).fill(null);			 
			
			for(let i=0;i<charlist.length;i++){
				charlist[i] = newRandomChar();
			}
			return charlist;
		}
		
		
		
		
		handleClick(i) {
		
			const clickedLetter = this.state.charList[i];	
		 
			console.log(this.state.charList[i]);
			const word = this.state.curWord + clickedLetter;
			
			this.setState({
				curChar: "B",
				curWord: word
			});
			
		}
		
		checkClick(){
			alert("clicked the button");
		}
		render() {
			return (
			<div>
				<TextDisplay value={this.state.curWord} />
				<Timer/>
				<CheckButton onClick={() => this.checkClick()}/>
				 <Board
					charlist={this.state.charList}
					onClick={i=> this.handleClick(i)}
          />
				
			  </div>
			);
      }
	  
	}
	
	
    class Board extends React.Component {
	
		
		  renderSquare(i) {
			return (
			  <Square
				curVal={this.props.charlist[i]}
				onClick={() => this.props.onClick(i)}
			  />
			);
		  }
				
				
	
		 render() {
    return (
	
				<div>
					<div className="board-row">
						{this.renderSquare(0)}
						{this.renderSquare(1)}
						{this.renderSquare(2)}
						{this.renderSquare(3)}
					  </div>
					<div className="board-row">
						{this.renderSquare(4)}
						{this.renderSquare(5)}
						{this.renderSquare(6)}
						{this.renderSquare(7)}
					</div>
					<div className="board-row">					
						{this.renderSquare(8)}
						{this.renderSquare(9)}
						{this.renderSquare(10)}
						{this.renderSquare(11)}
					</div>
					<div className="board-row">
						{this.renderSquare(12)}
						{this.renderSquare(13)}
						{this.renderSquare(14)}
						{this.renderSquare(15)}
					</div>
				  </div>
					  
		  );
  }
	
	}
	
	
		function newRandomChar(){
			const alphabetList = ["A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "R", "S", "T", "U", "V", "W", "X", "Y"];
			const vowelLIST1 = ["E", "A",  "I"];
			const vowelLIST2 = ["O", "U"];
			const specCharList = ["X", "Z", "Qu", "J"];
			
			var pChar = "";
			var rnd = parseInt(Math.random() * 100);
			var rnd2 = parseInt(Math.random() * 100);
			var num = 0;
			
		 
			//Check if prog chooses vowel or consonant			
			
			if (rnd < 8 ) {  //VOWEL1
				pChar = "E";
					
			}else if (rnd > 7 && rnd <13) {
				num = parseInt(Math.random() * 2);
				pChar = vowelLIST1[num];	
			}	
			else if (rnd > 12 && rnd < 21) { //VOWEL2
				num = parseInt(Math.random() * 1);
				pChar = vowelLIST2[num];		
				
			}else if (rnd > 21 && rnd <40) { // Common Consonants 
				var commonConsList = ["N", "R","D","T"];
				num = parseInt(Math.random() * 4);
				pChar = commonConsList[num];
				
			}else if (rnd >39&& rnd < 99) { //Consonant
				num = parseInt(Math.random()*24);
				pChar = alphabetList[num];		
			}else if (rnd == 99) { // Z
				pChar = "Z";	
			}else if (rnd == 100) { // Qu			 
				pChar = "Qu";	
			}
			else { 
				pChar = "E";
			}
			 
			return pChar;			
		}
	
	 
	
	
    ReactDOM.render(
      <Game />,
      document.getElementById("game-content")
    );
 
  </script>
</head>
<body>
  <div id="game-content"></div>
</body>
</html>